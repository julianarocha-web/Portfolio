@import "_variables";

/* =========================================
   1. ESTRUCTURA GENERAL (BASE DESKTOP)
========================================= */
.proyectos-section {
  position: relative;
  width: 100%;
  background: #0a0a0a;
  overflow: hidden; 
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 4rem;
}

.proyectos-bg {
  position: absolute;
  inset: 0;
  width: 100vw;
  height: 100vh;
  background-image: url(../img/proyectos/fondo-naranja-2.jpg);
  background-size: cover;
  position: fixed; 
  z-index: 0;
}

.proyectos-inner {
  position: relative;
  z-index: 2;
  width: 100%;
  height: 100%;
  
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: flex-start; 
  gap: 1.5rem;
}

/* =========================================
   2. ELEMENTOS INTERNOS
========================================= */

.carrousel-title {
  width: 100%;
  padding-left: 80px; 
  display: flex;
  gap: 1rem;

  h2 {
    font-family: $font-principal;
    font-size: 64px;
    font-weight: 700;
    padding-left: 200px; 
    color: white;
    margin: 0;
  }
}

.carrousel.wrapper {
  display: flex;
  align-items: center;
  gap: 2rem;
  width: 100%;
  padding: 2rem; 
}

/* --- TARJETA BASE (DESKTOP) --- */
.item.box {
  /* CAMBIO: Ancho reducido para que abrace mejor el contenido */
  flex: 0 0 450px; 
  height: 450px; 
  
  border-radius: 16px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start; 
  align-items: center;
  text-align: center;
  
  /* Padding ajustado para la tarjeta más angosta */
  padding: 50px 2rem 2rem 2rem; 
  
  background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.01));
  backdrop-filter: blur(50px);
  -webkit-backdrop-filter: blur(24px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 15px 40px rgba(0,0,0,0.4);
  color: $color-white;

  figcaption {
    font-size: 30px;
    font-weight: 600;
    font-family: $font-principal;
    margin-top: 0; 
    margin-bottom: 20px; 
  }

  img {
    /* CAMBIO: La imagen ahora se adapta al ancho de la caja */
    width: 100%; 
    max-width: 100%;
    height: auto;
    object-fit: contain; 
    max-height: 250px;   
    margin-top: 0;

    &.img-gestor {
      width: auto;       /* Específico para mantener proporción en el gestor */
      height: 220px; 
      object-fit: contain; 
      margin-top: 10px; 
      margin-bottom: 0;
    }

    &.img-mobile {
      width: auto;       
      height: 320px;     
      margin-top: 15px;
    }
  }

  .img-row {
      display: flex;
      flex-direction: row;
      justify-content: center;
      align-items: center;
      gap: 15px;
      width: 100%;
      margin-top: 0;

      .img-mobile {
          width: auto;
          height: 280px; 
          max-width: 45%;
          margin-top: 0 !important; 
      }
  }
}

.item.box.active {
  transform: scale(1.05);
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.6);
}

.carrousel-actions {
  display: flex;
  gap: 20px;
  margin-top: 10px;
  justify-content: center;
  width: 100%;
  z-index: 10;
  padding-left: 0; 
}

.carousel-btn {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  backdrop-filter: blur(5px);

  svg { width: 24px; height: 24px; }

  &:hover {
    background: white;
    color: #0a0a0a;
    transform: scale(1.1);
  }
}


/* =========================================
   3. LAPTOP 
========================================= */
@media (max-width: 1440px) and (min-width: 992px) {
    .carrousel-title {
        padding-left: 40px;
        h2 {
            font-size: 48px; 
            padding-left: 50px; 
        }
    }
    .item.box {
        /* En laptop mantenemos un ancho fijo intermedio si hace falta */
        flex: 0 0 450px; 
        height: 400px;
        padding: 40px 1rem;
        
        img {
            max-height: 250px;
            &.img-gestor { height: 250px; }
            &.img-mobile { height: 260px; }
        }
        .img-row .img-mobile { height: 240px; }
    }
}


/* =========================================
   4. RESPONSIVE MÓVIL 
========================================= */
@media (max-width: 991px) {
    
    .proyectos-section {
        height: auto !important; 
        min-height: 100vh;
        padding: 8rem 1.5rem 6rem 1.5rem; 
        align-items: flex-start;
        overflow: visible !important; 
        background-color: #0a0a0a; 
        z-index: 10;
    }

    .proyectos-bg {
        position: absolute !important;
        height: 100% !important;
    }

    .proyectos-inner {
        align-items: center;
        height: auto;
        gap: 2rem;
    }
    
    .carrousel-title {
        padding-left: 0;
        justify-content: center;
        h2 {
            padding-left: 0; 
            font-size: 42px;
            text-align: center;
        }
    }

    .item.box {
        flex: 0 0 85vw !important; 
        
        /* FIX MÓVIL: Altura automática y sin mínimo forzado */
        height: auto !important;
        min-height: 0 !important; 
        
        padding: 30px 1.5rem 30px 1.5rem !important;

        img {
            width: 100% !important;
            height: auto !important;
            max-height: 250px !important;
            margin-bottom: 0 !important;
            
            &.img-gestor { width: 100% !important; height: auto !important; }
            &.img-mobile { height: 240px !important; width: auto !important; }
        }

        .img-row {
            gap: 10px;
            .img-mobile { height: 180px !important; }
        }
        
        figcaption { 
            font-size: 24px; 
            margin-bottom: 15px;
        }
    }
    
    .carrousel-actions {
        margin-bottom: 0;
    }
}